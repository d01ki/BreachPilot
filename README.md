# BreachPilot v2.0

è‡ªå‹•ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ 

## ğŸ¯ æ¦‚è¦

BreachPilotã¯ã€OSINTã‹ã‚‰ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã¾ã§ã®å®Œå…¨ãªä¾µå…¥ãƒ†ã‚¹ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚CrewAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦è„†å¼±æ€§åˆ†æã¨PoCé¸æŠã‚’è¡Œã„ã€ã™ã¹ã¦ã®çµæœã‚’JSONå½¢å¼ã§ä¿å­˜ãƒ»å¯è¦–åŒ–ã—ã¾ã™ã€‚

## âœ¨ ä¸»ãªæ©Ÿèƒ½

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

1. **ã‚¿ãƒ¼ã‚²ãƒƒãƒˆIPæŒ‡å®š** - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ”»æ’ƒå¯¾è±¡ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›
2. **OSINTåé›†** - ãƒ›ã‚¹ãƒˆåã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã€ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã€WHOISæƒ…å ±ã€å…¬é–‹ã‚µãƒ¼ãƒ“ã‚¹ã®åé›†
3. **Nmapã‚¹ã‚­ãƒ£ãƒ³** - ãƒãƒ¼ãƒˆã€ã‚µãƒ¼ãƒ“ã‚¹ã€OSæ¤œå‡ºã€è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³
4. **CVEåˆ†æï¼ˆAnalyst Agentï¼‰** - CrewAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹CVEç‰¹å®šã¨XAIã«ã‚ˆã‚‹æ ¹æ‹ èª¬æ˜
5. **PoCæ¤œç´¢** - Exploit-DBã€GitHubã€Metasploitã‹ã‚‰ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ¤œç´¢
6. **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èª** - å®Ÿè¡Œã™ã‚‹ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã®é¸æŠ
7. **ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆå®Ÿè¡Œ** - ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒã§ã®å®‰å…¨ãªå®Ÿè¡Œ
8. **æˆåŠŸç¢ºèª** - ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã®æˆåŠŸ/å¤±æ•—ã‚’æ¤œè¨¼
9. **ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ** - Markdownã¨PDFå½¢å¼ã§ã®è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ

### OSINTåé›†æƒ…å ±

- ãƒ›ã‚¹ãƒˆå
- ãƒ‰ãƒ¡ã‚¤ãƒ³
- ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è¦§
- WHOISæƒ…å ±ï¼ˆç™»éŒ²è€…ã€æœ‰åŠ¹æœŸé™ãªã©ï¼‰
- å…¬é–‹ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§ï¼ˆãƒãƒŠãƒ¼æƒ…å ±å«ã‚€ï¼‰
- Shodanãƒ‡ãƒ¼ã‚¿ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…è¦è¦ä»¶

- Python 3.9+
- Nmap
- Git
- (ã‚ªãƒ—ã‚·ãƒ§ãƒ³) Metasploit Framework

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/d01ki/BreachPilot.git
cd BreachPilot
git checkout feature/dev_v2

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
cp .env.example .env
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦APIã‚­ãƒ¼ã‚’è¨­å®š

# Nmapã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆUbuntu/Debianï¼‰
sudo apt-get update
sudo apt-get install nmap

# ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰Metasploitã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb > msfinstall
chmod 755 msfinstall
./msfinstall
```

### è¨­å®š

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã®æƒ…å ±ã‚’è¨­å®šï¼š

```env
OPENAI_API_KEY=your_openai_api_key_here  # å¿…é ˆ
SHODAN_API_KEY=your_shodan_api_key_here  # ã‚ªãƒ—ã‚·ãƒ§ãƒ³
```

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

```bash
# ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
python run.py

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ä»¥ä¸‹ã«ã‚¢ã‚¯ã‚»ã‚¹
http://localhost:8000/ui
```

### APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```bash
# ã‚¹ã‚­ãƒ£ãƒ³é–‹å§‹
curl -X POST http://localhost:8000/api/scan/start \
  -H "Content-Type: application/json" \
  -d '{"target_ip": "192.168.1.100"}'

# OSINTå®Ÿè¡Œ
curl -X POST http://localhost:8000/api/scan/{session_id}/osint

# Nmapå®Ÿè¡Œ
curl -X POST http://localhost:8000/api/scan/{session_id}/nmap

# è„†å¼±æ€§åˆ†æ
curl -X POST http://localhost:8000/api/scan/{session_id}/analyze

# PoCæ¤œç´¢
curl -X POST http://localhost:8000/api/scan/{session_id}/poc

# ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆæ‰¿èª
curl -X POST http://localhost:8000/api/scan/{session_id}/approve \
  -H "Content-Type: application/json" \
  -d '["CVE-2020-1472", "CVE-2021-44228"]'

# ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆå®Ÿè¡Œ
curl -X POST http://localhost:8000/api/scan/{session_id}/exploit

# ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
curl -X POST http://localhost:8000/api/scan/{session_id}/report

# ãƒ¬ãƒãƒ¼ãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
curl http://localhost:8000/api/scan/{session_id}/download/report?format=pdf -o report.pdf
```

### Python API

```python
from backend.orchestrator import ScanOrchestrator
from backend.models import ScanRequest

# ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼åˆæœŸåŒ–
orchestrator = ScanOrchestrator()

# ã‚¹ã‚­ãƒ£ãƒ³é–‹å§‹
request = ScanRequest(target_ip="192.168.1.100")
session = orchestrator.start_scan(request)

# å„ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œ
osint_result = orchestrator.run_osint(session.session_id)
nmap_result = orchestrator.run_nmap(session.session_id)
analyst_result = orchestrator.run_analysis(session.session_id)
poc_results = orchestrator.search_pocs(session.session_id)

# ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆæ‰¿èª
approved_cves = ["CVE-2020-1472"]
orchestrator.await_user_approval(session.session_id, approved_cves)

# ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆå®Ÿè¡Œ
exploit_results = orchestrator.run_exploits(session.session_id)

# ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
report = orchestrator.generate_report(session.session_id)
```

## ğŸ§ª Zerologonè„†å¼±æ€§ã®ãƒ†ã‚¹ãƒˆ

VMwareå†…ã®Windowsã‚µãƒ¼ãƒãƒ¼ï¼ˆCVE-2020-1472: Zerologonè„†å¼±æ€§ï¼‰ã«å¯¾ã™ã‚‹ãƒ†ã‚¹ãƒˆä¾‹ï¼š

```bash
# Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå…¥åŠ›
# ä¾‹: 192.168.1.10 (VMwareå†…ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼)

# å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’é †æ¬¡å®Ÿè¡Œ
# 1. OSINT â†’ ãƒ›ã‚¹ãƒˆåã‚„ãƒ‰ãƒ¡ã‚¤ãƒ³æƒ…å ±ã‚’åé›†
# 2. Nmap â†’ ãƒãƒ¼ãƒˆ445ã€135ãªã©ã‚’æ¤œå‡º
# 3. Analysis â†’ CVE-2020-1472ã‚’ç‰¹å®š
# 4. PoC Search â†’ Zerologonã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã‚’æ¤œç´¢
# 5. æ‰¿èª â†’ CVE-2020-1472ã‚’é¸æŠ
# 6. å®Ÿè¡Œ â†’ Metasploitãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦æ”»æ’ƒ
# 7. ãƒ¬ãƒãƒ¼ãƒˆ â†’ çµæœã‚’PDF/Markdownã§å‡ºåŠ›
```

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
BreachPilot/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py              # è¨­å®šç®¡ç†
â”‚   â”œâ”€â”€ models.py              # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ main.py                # FastAPI ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ orchestrator.py        # ãƒ¡ã‚¤ãƒ³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
â”‚   â”œâ”€â”€ scanners/
â”‚   â”‚   â”œâ”€â”€ osint_scanner.py   # OSINTåé›†
â”‚   â”‚   â””â”€â”€ nmap_scanner.py    # Nmapã‚¹ã‚­ãƒ£ãƒ³
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ analyst_crew.py    # CVEåˆ†æã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ poc_crew.py        # PoCæ¤œç´¢ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ exploiter/
â”‚   â”‚   â””â”€â”€ exploit_executor.py # ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆå®Ÿè¡Œ
â”‚   â””â”€â”€ report/
â”‚       â””â”€â”€ report_generator.py # ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ index.html             # Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â””â”€â”€ static/
â”‚       â””â”€â”€ app.js             # Vue.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ data/                      # JSONçµæœãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ reports/                   # ç”Ÿæˆã•ã‚ŒãŸãƒ¬ãƒãƒ¼ãƒˆ
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env.example
â”œâ”€â”€ run.py                     # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â””â”€â”€ README.md
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„äº‹é …

âš ï¸ **è­¦å‘Š**: ã“ã®ãƒ„ãƒ¼ãƒ«ã¯æ•™è‚²ç›®çš„ãŠã‚ˆã³æ‰¿èªã•ã‚ŒãŸä¾µå…¥ãƒ†ã‚¹ãƒˆã«ã®ã¿ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

- å¿…ãšè‡ªèº«ãŒæ‰€æœ‰ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã¾ãŸã¯æ˜ç¤ºçš„ãªè¨±å¯ã‚’å¾—ãŸã‚·ã‚¹ãƒ†ãƒ ã«å¯¾ã—ã¦ã®ã¿ä½¿ç”¨ã™ã‚‹ã“ã¨
- ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã¯éš”é›¢ã•ã‚ŒãŸç’°å¢ƒã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚’æ¨å¥¨
- æœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨ã¯é¿ã‘ã‚‹ã“ã¨
- ã™ã¹ã¦ã®æ´»å‹•ã¯ãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã€æ³•çš„è¨¼æ‹ ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

å„ã‚¹ãƒ†ãƒƒãƒ—ã®çµæœã¯JSONå½¢å¼ã§ä¿å­˜ã•ã‚Œã¾ã™ï¼š

- `{target_ip}_osint.json` - OSINTçµæœ
- `{target_ip}_nmap.json` - Nmapã‚¹ã‚­ãƒ£ãƒ³çµæœ
- `{target_ip}_analyst.json` - CVEåˆ†æçµæœ
- `{cve_id}_poc.json` - PoCæ¤œç´¢çµæœ
- `{target_ip}_{cve_id}_exploit.json` - ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆçµæœ
- `{target_ip}_report.json` - æœ€çµ‚ãƒ¬ãƒãƒ¼ãƒˆ
- `session_{session_id}.json` - ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹

## ğŸ› ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### NmapãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„

```bash
sudo apt-get install nmap  # Ubuntu/Debian
brew install nmap          # macOS
```

### OpenAI APIã‚­ãƒ¼ã‚¨ãƒ©ãƒ¼

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã«æ­£ã—ã„APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚

### Metasploitãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„

Metasploit Frameworkã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€ãƒ‘ã‚¹ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚

### ãƒãƒ¼ãƒˆæ¨©é™ã‚¨ãƒ©ãƒ¼

Nmapã®SYNã‚¹ã‚­ãƒ£ãƒ³ã«ã¯rootæ¨©é™ãŒå¿…è¦ã§ã™ï¼š

```bash
sudo python run.py
```

## ğŸ¤ è²¢çŒ®

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ã€‚å¤§ããªå¤‰æ›´ã®å ´åˆã¯ã€ã¾ãšissueã‚’é–‹ã„ã¦å¤‰æ›´å†…å®¹ã‚’è­°è«–ã—ã¦ãã ã•ã„ã€‚

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ğŸ™ è¬è¾

- [CrewAI](https://www.crewai.com/) - ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- [Nmap](https://nmap.org/) - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¹ã‚­ãƒ£ãƒŠãƒ¼
- [Metasploit](https://www.metasploit.com/) - ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- [FastAPI](https://fastapi.tiangolo.com/) - Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

## ğŸ“§ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€GitHubã®Issuesã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§å ±å‘Šã—ã¦ãã ã•ã„ã€‚
